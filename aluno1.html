<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="alunos-form.css">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KQVBGG26');</script>
    <!-- End Google Tag Manager -->
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KQVBGG26"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

<div class="form-container">
    <form id="tagManagerForm" onsubmit="updateGTM(event)">
        <div class="form-group">
            <label for="gtmId">Enter GTM Container ID:</label>
            <input type="text" id="gtmId" name="gtmId" required placeholder="e.g., GTM-XXXXXXX">
        </div>
        <button type="submit">Update GTM</button>
    </form>
</div>
    <div class="form-container">
        <form id="contactForm" onsubmit="handleSubmit(event)">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="phone">Telephone:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <button type="submit">Send</button>
        </form>
    </div>

    <div class="products-cart-container">
        <div class="products">
            <h2>Products</h2>
            <div id="productList">
                <div class="product-item">
                    <img src="https://i.postimg.cc/wtn6P9SY/mirriflin.jpg" alt="Product 1" class="product-image">
                    <span>Gotas de Mirriflin</span>
                    <button onclick="addToCart('Gotas de Mirriflin', 10)">Add to Cart ($10)</button>
                </div>
                <div class="product-item">
                    <img src="https://i.postimg.cc/Q95XZR39/mitrozon.jpg" alt="Product 2" class="product-image">
                    <span>Mitrozón en Barra</span>
                    <button onclick="addToCart('Mitrozón en Barra', 15)">Add to Cart ($15)</button>
                </div>
                <div class="product-item">
                    <img src="https://i.postimg.cc/N2cQspsN/mitrozote.jpg" alt="Product 3" class="product-image">
                    <span>Extracto de Mitrozote</span>
                    <button onclick="addToCart('Extracto de Mitrozote', 20)">Add to Cart ($20)</button>
                </div>
            </div>
        </div>

        <div class="cart">
            <h2>Shopping Cart</h2>
            <div id="cartItems"></div>
            <div class="cart-total" id="cartTotal">Total: $0</div>
            <button class="checkout-button" onclick="simulateCheckout()">Checkout</button>
        </div>
    </div>

    <script>
        function handleSubmit(event) {
            event.preventDefault();
            
            // Get form data
            const formData = {
                quien: document.getElementById('name').value,
                donde: document.getElementById('email').value,
                llamame: document.getElementById('phone').value
            };

            // Push the event to dataLayer
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': 'orejitas',
                'formName': 'contact_form',
                'formData': formData
            });

            // Optional: Reset form after submission
            document.getElementById('contactForm').reset();
            
            // Optional: Show success message
            alert('Form submitted successfully!');
        }
        
    const cart = [];

    function addToCart(product, price) {
    cart.push({ product, price });
    updateCart();

    // Push event to dataLayer for Google Tag Manager
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
        event: 'naricita',
        tiendita: {
            items: [
                {
                    item_name: product,
                    price: price,
                    quantity: 1
                }
            ]
        }
    });

    console.log('Added to cart:', { product, price });
}

    function updateCart() {
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');

        cartItems.innerHTML = '';
        let total = 0;

        cart.forEach(item => {
            const div = document.createElement('div');
            div.className = 'cart-item';
            div.innerHTML = `<span>${item.product}</span><span>$${item.price}</span>`;
            cartItems.appendChild(div);
            total += item.price;
        });

        cartTotal.textContent = `Total: $${total}`;
    }

    function simulateCheckout() {
        alert('Initiating checkout...');
        const purchaseData = cart.map(item => `${item.product} ($${item.price})`).join(', ');
        console.log(`Purchase complete: ${purchaseData}`);
        cart.length = 0;
        updateCart();
    }
    </script>
</body>
</html>